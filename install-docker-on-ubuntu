# This is a guide for installing a specific version of docker on Ubuntu linux

# THIS IS ARCHITECTURE SPECIFIC ! watch out for your processor (ARM / intel / AMD) and x32 / x64 bit as well as the flavor of your OS

## lets check what flavor Ubuntu you are running
cat /etc/lsb-release

## now let's get started

# we first will clear any docker versions just in case
sudo apt-get remove docker docker-engine docker.io containerd runc

# extra tidying up
sudo apt autoremove

# update the package registry
sudo apt update

# get certificates installed for interacting with docker repo
sudo apt install apt-transport-https ca-certificates curl software-properties-common

# add docker key
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -

# Add the Docker repository to APT sources:  (WATCH THE VERSION , IM ON 64 bit AMD processor with UBUNTU FOCAL)
sudo add-apt-repository "deb [arch=amd64] https://download.docker.com/linux/ubuntu focal stable"

## force install from the place we linked instead of default ubuntu
apt-cache policy docker-ce
#it should list out available versions, if they look okay go ahead and install
sudo apt install docker-ce

#check the status
sudo systemctl status docker
# if it says running then awesome! you can close out with ctrl+c , open a new terminal

# list file system
ls
# change directory
cd Documents

# make a folder
mkdir docker-projects (you can change the name)

# change into the folder you made
cd docker-projects

# now we will run hello-world to make sure everything works, if it pops stuff into the terminal then its working!
docker run hello-world
# Oops... mine is denied :( that's because we didn't set up docker group to access things without the power of sudo
sudo usermod -aG docker ${USER}
su - ${USER}
groups
# or you can be naughty and just put sudo in front of the command
sudo docker run hello-world

## congrats! if it didn't work, I recommend digitalocean's guide, it's a little less wordy than dockers official docs
# https://www.digitalocean.com/community/tutorials/how-to-install-and-use-docker-on-ubuntu-20-04

# why is this cool? well first off, your computer didn't have hello-world, docker figured that out right away and went and grabbed the official up to date copy, pulled it down, and launched it as a service
# if you're curious what else docker can find and pull for you use search before pull
docker search ubuntu
# this should yield a list of image options for a ubuntu docker image (doesn't have to do with the ubuntu we are in)
# other images are available on github and docker hub ... in general well rated or officially supported projects in docker hub are a breeze to use and pull
# a handy image is node, there's a seperate guide sheet for that!

# if you want to be insane and run ubuntu in ubuntu go ahead and pull
docker pull ubuntu

# to see what images have been pulled type 
docker images
# run the ubuntu image with -i and -t for shell access
docker run -it ubuntu

# what is cool about this? well , you didn't (need to) use sudo , so docker ran ubuntu without being root, but now gave you a shell inside ubuntu that IS root. if they both have internet access maybe you can see how powerful this can be! containers in containers!!! rent your PC infrastructure out to the mice in your closet!!! etc!!! :DDDD
# you can ctrl+tab away and use a different terminal or use ctrl+c in a running docker shell to close out
# you can run multiple images at a time if your computer can handle it
# docker hub has distributions like alpine that are wayyy lighter than ubuntu
# to check which containers you have going 
docker ps
# to view all containers, including inactive ones
docker ps -a
# to start a container again use this line, replacing container id with one from the 'docker ps -a' list
docker start 'CONTAINER ID'

# for other general container operations see the main cheat-sheet repository file "docker commands"
